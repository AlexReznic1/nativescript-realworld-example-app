<ActionBar>
    <GridLayout columns="auto, *, auto, auto" rows="*">
        <Label [text]="'fa-bars' | fonticon" row="0" col="0" class="fa" (tap)="onSidebar()" verticalAlignment="center"></Label>
        <Label text="{{ 'title' | L }}" row="0" col="1" class="h2" horizontalAlignment="center" verticalAlignment="center"></Label>
        <Label [text]="'fa-bell-o' | fonticon" row="0" col="2" class="fa m-r-15" (tap)="onNotifications()" verticalAlignment="center"></Label>
        <Label [text]="'fa-search' | fonticon" row="0" col="3" class="fa m-r-15" (tap)="onSearch()" verticalAlignment="center"></Label>
    </GridLayout>
</ActionBar>
<GridLayout class="home-content" rows="auto, *" columns="*">
    <StackLayout row="0" horizontalAlignment="center">
        <SegmentedBar selectedIndex="1" (selectedIndexChange)="onFeedChange($event)" class="m-5">
            <SegmentedBarItem title="{{ 'article.feed.user' | L }}"></SegmentedBarItem>
            <SegmentedBarItem title="{{ 'article.feed.global' | L }}"></SegmentedBarItem>
        </SegmentedBar>
    </StackLayout>

    <RadListView #lvArticles row="1" [items]="articles" class="list-group" pullToRefresh="true" (pullToRefreshInitiated)="onReloadArticles($event)"
        *ngIf="articles?.length > 0" loadOnDemandMode="Auto" (loadMoreDataRequested)="onLoadMoreDataRequested($event)">
        <ng-template tkListItemTemplate let-item="item">
            <StackLayout class="article-item">
                <GridLayout rows="*, *, *" columns="*, *" class="list-group-item article-item-content">
                    <Label row="0" [text]="item.title" class="h2 list-group-item-heading"></Label>

                    <Label row="1" colspan="2" [text]="item.description" class="m-5 text-primary font-weight-bold list-group-item-text"></Label>

                    <GridLayout row="2" rows="auto, auto" columns="auto, auto" class="list-group-item article-item-author">
                        <Image row="0" col="0" rowspan="2" [src]="item.author.image" class="thumb img-circle" height="32" class="m-r-10"></Image>

                        <StackLayout row="1" col="1" class="article-item-text">
                            <Label class="p-t-10" [text]="item.author.username"></Label>
                            <Label class="p-b-10 font-italic" [text]="item.createdAt | date"></Label>
                        </StackLayout>
                    </GridLayout>
                </GridLayout>
            </StackLayout>
        </ng-template>
    </RadListView>

    <Label row="1" text="{{ 'article.empty' | L }}" horizontalAlignment="center" verticalAlignment="center" class="h2" *ngIf="articles?.length <= 0"></Label>

    <FAB row="1" (tap)="onAddArticle()" icon="" hideOnSwipeOfView="lvArticles" class="fab"></FAB>

    <ActivityIndicator row="1" [busy]="isLoading" horizontalAlignment="center" verticalAlignment="center" class="activity-indicator"></ActivityIndicator>
</GridLayout>